# Use the latest Python image
FROM python:latest

# Set an environment variable with the directory
# where we'll be running the app
ENV APP /app

# Create the directory and instruct Docker to operate
# from there from now on
RUN mkdir $APP
WORKDIR $APP

RUN git clone https://github.com/cve-search/cve-search.git ./

# Install the dependencies
RUN pip install -r requirements.txt

COPY ./docker/files/cve_search/install.sh .

RUN ["chmod", "+x", "./install.sh"]

COPY ./docker/files/cve_search/configuration.ini ./etc/configuration.ini

RUN ./install.sh

RUN rm ./install.sh

EXPOSE 5000

# run the command to start the webserver
CMD ["python", "/app/web/index.py"]